{{- $nodeRole := getv "/host/role" }}
{{- $nodeGid := getv "/host/gid" }}
{{- $tmpval := "" }}
{{- if eq $nodeRole "cs_node" }}
  {{- range gets "/hosts/cs_node/*/pub_key" }}
{{ .Value }}
  {{- end }}
{{- end }}
{{- if eq $nodeRole "mongos_node" }}
  {{- range gets "/hosts/mongos_node/*/pub_key" }}
{{ .Value }}
  {{- end }}
{{- end }}
{{- if or (eq $nodeRole "shard_node") (eq $nodeRole "shard_node-replica") }}
  {{- range $tmpval = lsdir "/hosts/shard_node/" }}
    {{- if eq (getv (printf "/hosts/shard_node/%s/gid" $tmpval)) $nodeGid }}
{{ getv (printf "/hosts/shard_node/%s/pub_key" $tmpval) }}
    {{- end }}
  {{- end }}
  {{- range $tmpval = lsdir "/hosts/shard_node-replica/" }}
    {{- if eq (getv (printf "/hosts/shard_node-replica/%s/gid" $tmpval)) $nodeGid }}
{{ getv (printf "/hosts/shard_node-replica/%s/pub_key" $tmpval) }}
    {{- end }}
  {{- end }}
{{- end }}

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCZVa8HdQb3pFjxtnfMNaBRuVRd40JxOyj++2T66f4AMIr12M+6cghCyWdy7PhGVVpD08X8s9ordGD2daaKXVxKYdW07mcfhBI87YMfMIpOqNn2Vdoni8/qEcIq8qZ6ClZODYBtT6E68OlZgu7ppO2SAdkw36UMyQNErDb4jPFnmhLyMbS2qhYiWzquiVBA0KAORkFdQc9T9brkl2Minleu7kzaGN9ziCoQwilrdyF9sCsNb/qNL2Us28OB8zczs54Qp/DEFZAHqXxQIdY8W+XIK0jFNUroH5yF+hHG22sshyCzUYpz7Gdefr2yG2ydX53ve8ND8GIqGq5FR9vmZLYz kp-ftxwppjn
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDUHnj6BqoiqJynEj8DrbiD6an1Foz9ymFFnzEjBCMzzmxgOabSjJ/utyCrVTx+vRPTYOnigXBs2mprNUoQwA4nJ+wioMhV6JA5oNnL8tvlorViiE6mWoC1ZTVvJEQ9DXy4zxbxGT3KILj6HeIGO7YQe3A5dlBxXCZeAK30SFPHyVE5Ro0XlbiF4yody9E9UmyCaKpDZkmNdyMQciDdI5kiPvOJEujoRE6oSGcXDSDhLutM3zmaMhPJMUWqEOx2XkRYsKT+xXvH0tAZ3D9vegh2AtrAAuAeFprBJ7emSLNxZEARCfIgpJxBV3UsiO6Moj1f9HmVCKApgKE2kPt43mUf kp-yczluamx
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDdsmeBOUPDBF0B5JsHUbHzWNK3PxbfNU6Zy5azKIXew8SlmKkteEXUKx13Wh9oFR7drvWmdP3hZ/51ZyLTPLHmhNkup4VwrMFRC7zf8MrW/dhn60VqR5oIxdu+MuTWceibWYeuozn5qT1Klpt/0+89Yy0Zr9zThJF2UjX/vlYv24BiD3VcnYlxQ1PavU0yCuXqA9lL58zioaSK9ONHIB7x5iAwY1Clht+EKHT7uQk/iVA/m/J0UMepWZhBvToSwlFDbAdNLJbibS2k0frfV5tfruxByIJskeIJJAk72TrsgU1UgyiTAIDKTY84xHBtj1Xh2zriAejW0PfijNnjLACOK5gcXB8U6N4+YrXtzjXIc0EQMEE7k3MkXjOScr+HArkw3MxIx/UouIx7VnpZs5xOtG+I5dfap1LFFuGCqsfxImnLbfi9ujGCEIFnK0UQ300s2mdYuJhbttSWEwvkUuGiF8YPw6l7RnLfiuGHkAE1UHAHcL9M+L4MUX3tWXzLIis= amandsonwang@yunify.com
