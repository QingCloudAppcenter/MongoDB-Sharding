flush > /opt/app/current/bin/envs/node.env << NODE_ENV_FILE
NODE_CTL=nodectl
MY_SID={{ getv "/host/sid" }}
MY_IP={{ getv "/host/ip" }}
MY_ROLE={{ $nodeRole }}
MY_GID={{ $nodeGid }}
MY_PORT=$host_port
CONF_MAINTAIN_NET_PORT=27099
DATA_MOUNTS="/data"
GLOBAL_UUID=$cluster_global_uuid
CLUSTER_ID=$cluster_id
SERVICES="$host_service_name/true/tcp:$host_port"
NODE_LIST=($(echo ${host_node_list[@]}))
{{- if eq $nodeRole "mongos_node" }}
INFO_SHARD_GROUP_LIST=($(echo ${shard_group_list[@]}))
  {{- range getvs "/hosts/shard_node/*/gid" }}
INFO_SHARD_{{ . }}_LIST=($(eval echo \$\{shard_{{ . }}_list[@]\}))
INFO_SHARD_{{ . }}_RSNAME=$(eval echo \$shard_{{ . }}_rsname)
  {{- end }}
INFO_CS_LIST=({{ $cs_node_list }})
INFO_CS_RSNAME=$cs_rsname
INFO_CS_PORT={{ $csPort }}
{{- else }}
RS_NAME=$host_repl_name
{{- end }}

DB_QC_USER=qc_master
DB_ROOT_USER=root
DB_ROOT_PWD={{ getv "/env/conf.userPass" }}

VERTICAL_SCALING_FLAG={{ $verticalScalingFlag }}
CHANGE_VXNET_FLAG={{ $changeVxnetFlag }}
CHANGE_VXNET_ROLES='{{ $changeVxnetRoles }}'

ADDING_HOSTS_FLAG={{ $addingHostsFlag }}
ADDING_LIST=($(echo ${confd_adding_hosts[@]}))

DELETING_HOSTS_FLAG={{ $deletingHostsFlag }}
DELETING_LIST=($(echo ${confd_deleting_hosts[@]}))

NODE_ENV_FILE